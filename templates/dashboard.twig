{% extends "base.twig" %}

{% block content %}
<div class="flex flex-col min-h-screen bg-gray-50">
  {% include "partials/dashboard_nav.twig" %}

  <main class="flex-1 max-w-[1440px] mx-auto w-full px-6 py-10">
    <div class="flex justify-between items-center mb-10">
      <h2 class="text-3xl font-bold text-gray-800">Dashboard</h2>
    </div>

    <!-- Stats Cards -->
    <div id="statsCards" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
      <div class="bg-white p-6 rounded-2xl shadow">
        <h3 class="text-gray-600">Total Tickets</h3>
        <p id="totalTickets" class="text-3xl font-bold text-gray-800 mt-2">0</p>
      </div>

      <div class="bg-green-100 p-6 rounded-2xl shadow">
        <h3 class="text-gray-600">Open</h3>
        <p id="openTickets" class="text-3xl font-bold text-green-700 mt-2">0</p>
      </div>

      <div class="bg-amber-100 p-6 rounded-2xl shadow">
        <h3 class="text-gray-600">In Progress</h3>
        <p id="progressTickets" class="text-3xl font-bold text-amber-700 mt-2">0</p>
      </div>

      <div class="bg-gray-200 p-6 rounded-2xl shadow">
        <h3 class="text-gray-600">Closed</h3>
        <p id="closedTickets" class="text-3xl font-bold text-gray-700 mt-2">0</p>
      </div>
    </div>

    <!-- Navigation -->
    <div class="text-center">
      <a
        href="/tickets"
        class="bg-blue-600 text-white px-8 py-3 rounded-2xl shadow hover:bg-blue-700 transition"
      >
        Manage Tickets
      </a>
    </div>
  </main>

  {% include "partials/footer.twig" %}
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const tickets = JSON.parse(localStorage.getItem("tickets")) || [];

    const total = tickets.length;
    const open = tickets.filter(t => t.status === "open").length;
    const inProgress = tickets.filter(t => t.status === "in_progress").length;
    const closed = tickets.filter(t => t.status === "closed").length;

    document.getElementById("totalTickets").textContent = total;
    document.getElementById("openTickets").textContent = open;
    document.getElementById("progressTickets").textContent = inProgress;
    document.getElementById("closedTickets").textContent = closed;
  });
</script>
{% endblock %}
